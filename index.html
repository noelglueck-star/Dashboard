<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dashboard</title>

<style>
body {
  margin: 0;
  background: black;
  color: white;
  font-family: Palatino, serif;
  display: flex;
  flex-direction: column;
  align-items: center;
}

h1 {
  font-size: 22px;
  margin: 14px 0 6px;
}

.separator {
  width: 100%;
  height: 1px;
  margin: 6px 0;
  background: linear-gradient(to right, transparent, rgba(255,255,255,0.25), transparent);
}

/* ===== Hauptuhr ===== */
.clock-container {
  display: flex;
  flex-direction: column;
  align-items: center;
}

.clock {
  width: 130px;
  height: 130px;
  border: 2px solid white;
  border-radius: 50%;
  position: relative;
  margin: 6px 0;
}

.hand {
  position: absolute;
  width: 50%;
  height: 2px;
  background: white;
  top: 50%;
  left: 50%;
  transform-origin: left center;
}

.hour { height: 3px; }

#main-date {
  font-size: 14px;
  margin-bottom: 6px;
}

/* ===== Märkte ===== */
.markets {
  display: flex;
  justify-content: center;
  gap: 28px;
  font-size: 13px;
  margin: 6px 0;
}

.market {
  padding-left: 12px;
  border-left: 1px solid rgba(255,255,255,0.3);
}

/* ===== News ===== */
.news {
  width: 90%;
  font-size: 13px; /* KLEINER – wie Märkte */
  text-align: center;
}

.news div {
  margin: 4px 0;
}

/* ===== Weltuhren ===== */
.world-clocks {
  display: flex;
  gap: 16px;
  margin-top: 10px;
}

.small-clock {
  width: 42px;
  height: 42px;
  border: 1px solid white;
  border-radius: 50%;
  position: relative;
}

/* ===== Logo ===== */
#logo {
  margin-top: 6px;
  width: 44px;
  height: 44px;
  border: 1px solid rgba(255,255,255,0.4);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 22px;
  font-weight: 600;
}
</style>
</head>

<body>

<h1>Hallo Noel!</h1>
<div class="separator"></div>

<div class="clock-container">
  <div class="clock">
    <div class="hand hour" id="main-hour"></div>
    <div class="hand minute" id="main-minute"></div>
  </div>
  <div id="main-date"></div>
</div>

<div class="separator"></div>

<div class="markets">
  <div class="market" id="btc">Bitcoin lädt…</div>
  <div class="market" id="eth">Ethereum lädt…</div>
  <div class="market" id="sol">Solana lädt…</div>
</div>

<div class="separator"></div>

<div class="news" id="news">Nachrichten werden geladen…</div>

<div class="separator"></div>

<div class="world-clocks">
  <div class="small-clock" id="atlanta"><div class="hand hour"></div><div class="hand minute"></div></div>
  <div class="small-clock" id="seoul"><div class="hand hour"></div><div class="hand minute"></div></div>
  <div class="small-clock" id="beijing"><div class="hand hour"></div><div class="hand minute"></div></div>
  <div class="small-clock" id="tokyo"><div class="hand hour"></div><div class="hand minute"></div></div>
</div>

<div id="logo">NG</div>

<script>
/* ===== Uhren ===== */
function updateMainClock() {
  const n = new Date();
  const h = n.getHours() % 12;
  const m = n.getMinutes();

  main-hour.style.transform = `rotate(${h*30 + m*0.5}deg)`;
  main-minute.style.transform = `rotate(${m*6}deg)`;

  main-date.textContent = n.toLocaleDateString("de-DE", {
    weekday:"long", day:"numeric", month:"long", year:"numeric"
  });
}

function updateSmallClock(el, offset) {
  const d = new Date();
  d.setHours(d.getHours() + offset);
  const h = d.getHours() % 12;
  const m = d.getMinutes();

  el.children[0].style.transform = `rotate(${h*30 + m*0.5}deg)`;
  el.children[1].style.transform = `rotate(${m*6}deg)`;
}

setInterval(() => {
  updateMainClock();
  updateSmallClock(atlanta, -6);
  updateSmallClock(seoul, 8);
  updateSmallClock(beijing, 7);
  updateSmallClock(tokyo, 8);
}, 1000);

updateMainClock();

/* ===== Märkte (stabil, wie funktionierend) ===== */
async function loadMarkets() {
  try {
    const r = await fetch(
      "https://api.coingecko.com/api/v3/simple/price?ids=bitcoin,ethereum,solana&vs_currencies=eur&include_24hr_change=true"
    );
    const d = await r.json();

    btc.textContent = `Bitcoin €${Math.round(d.bitcoin.eur)} (${d.bitcoin.eur_24h_change.toFixed(1)}%)`;
    eth.textContent = `Ethereum €${Math.round(d.ethereum.eur)} (${d.ethereum.eur_24h_change.toFixed(1)}%)`;
    sol.textContent = `Solana €${Math.round(d.solana.eur)} (${d.solana.eur_24h_change.toFixed(1)}%)`;
  } catch {
    btc.textContent = "Marktdaten nicht verfügbar";
  }
}
loadMarkets();
setInterval(loadMarkets, 120000);

/* ===== News (maximal robust, Tagesschau) ===== */
async function loadNews() {
  try {
    const r = await fetch("https://www.tagesschau.de/api2/news");
    const d = await r.json();
    const items = d.news.slice(0, 5);

    news.innerHTML = items.map(n => `<div>${n.title}</div>`).join("");
  } catch {
    news.textContent = "Nachrichten derzeit nicht verfügbar";
  }
}
loadNews();
setInterval(loadNews, 300000);
</script>

</body>
</html>