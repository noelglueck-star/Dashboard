<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dashboard</title>

<style>
html, body {
  margin: 0;
  padding: 0;
  background: #000;
  color: #fff;
  font-family: Palatino, "Palatino Linotype", serif;
}

.dashboard {
  max-width: 480px;
  margin: 0 auto;
  padding: 20px;
}

.section {
  margin-bottom: 18px;
  padding-bottom: 10px;
}

.separator {
  height: 1px;
  background: linear-gradient(to right, transparent, rgba(255,255,255,0.25), transparent);
  margin: 10px 0;
}

#greeting {
  text-align: center;
  font-size: 20px;
  letter-spacing: 1px;
}

.clock-wrapper {
  display: flex;
  justify-content: center;
}

.clock {
  width: 110px;
  height: 110px;
}

#date {
  text-align: center;
  margin-top: 4px;
  font-size: 13px;
  opacity: 0.85;
}

.weather-row {
  display: flex;
  justify-content: center;
  gap: 40px;
}

.weather-box {
  flex: 1;
  text-align: center;
}

.weather-city { font-size: 15px; }
.weather-temp { font-size: 24px; margin: 4px 0; }
.weather-icon { font-size: 24px; }

.markets-list-horizontal {
  display: flex;
  justify-content: space-between;
  gap: 12px;
  font-size: 13px;
}

.market-item-horizontal {
  flex: 1;
  text-align: center;
  border-right: 1px solid rgba(255,255,255,0.12);
  padding: 4px 0;
}

.market-item-horizontal:last-child {
  border-right: none;
}

.market-up { color: #4caf50; }
.market-down { color: #e53935; }

#news-list {
  display: flex;
  flex-direction: column;
  gap: 5px;
  align-items: center;
}

.news-item {
  text-align: center;
  font-size: 13px;
  padding: 3px 0;
  opacity: 0;
  transform: translateY(6px);
  transition: opacity 0.6s ease, transform 0.6s ease;
}

.news-item.visible {
  opacity: 1;
  transform: translateY(0);
}

.world-clocks {
  display: flex;
  justify-content: center;
  gap: 14px;
}

.small-clock-container {
  display: flex;
  flex-direction: column;
  align-items: center;
}

.small-clock {
  width: 44px;
  height: 44px;
}

.clock-label {
  font-size: 9px;
  margin-top: 2px;
  opacity: 0.7;
}

.footer {
  display: flex;
  justify-content: center;
  margin-top: 10px;
}

.logo {
  width: 28px;
  height: 28px;
  border: 1px solid rgba(255,255,255,0.45);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 11px;
  letter-spacing: 1px;
}
</style>
</head>

<body>
<div class="dashboard">

<div id="greeting">Hallo Noel!</div>
<div class="separator"></div>

<div class="clock-wrapper">
  <div class="clock">
    <svg viewBox="0 0 100 100">
      <circle cx="50" cy="50" r="48" stroke="white" stroke-width="1" fill="none"/>
      <line id="hour" x1="50" y1="50" x2="50" y2="30" stroke="white" stroke-width="2"/>
      <line id="minute" x1="50" y1="50" x2="50" y2="20" stroke="white" stroke-width="1.5"/>
      <line id="second" x1="50" y1="50" x2="50" y2="16" stroke="white" stroke-width="1"/>
    </svg>
  </div>
</div>
<div id="date"></div>

<div class="separator"></div>

<div class="weather-row">
  <div class="weather-box" id="weather-albstadt"></div>
  <div class="weather-box" id="weather-boeblingen"></div>
</div>

<div class="separator"></div>

<h3 style="text-align:center;">Märkte</h3>
<div id="markets-list" class="markets-list-horizontal">Lade Marktdaten…</div>

<div class="separator"></div>

<h3 style="text-align:center;">Schlagzeilen</h3>
<div id="news-list">Lade Nachrichten…</div>

<div class="separator"></div>

<div class="world-clocks">
  <div class="small-clock-container">
    <div class="small-clock">
      <svg viewBox="0 0 100 100">
        <circle cx="50" cy="50" r="48" stroke="white" stroke-width="1" fill="none"/>
        <line id="atl-h" x1="50" y1="50" x2="50" y2="32" stroke="white" stroke-width="2"/>
        <line id="atl-m" x1="50" y1="50" x2="50" y2="22" stroke="white" stroke-width="1.5"/>
      </svg>
    </div>
    <div class="clock-label">ATL</div>
  </div>

  <div class="small-clock-container">
    <div class="small-clock">
      <svg viewBox="0 0 100 100">
        <circle cx="50" cy="50" r="48" stroke="white" stroke-width="1" fill="none"/>
        <line id="tok-h" x1="50" y1="50" x2="50" y2="32" stroke="white" stroke-width="2"/>
        <line id="tok-m" x1="50" y1="50" x2="50" y2="22" stroke="white" stroke-width="1.5"/>
      </svg>
    </div>
    <div class="clock-label">TYO</div>
  </div>
</div>

<div class="footer">
  <div class="logo">NG</div>
</div>

</div>

<script>
function updateClock() {
  const now = new Date();
  const h = now.getHours() % 12;
  const m = now.getMinutes();
  const s = now.getSeconds();

  hour.setAttribute("transform",`rotate(${h*30+m/2} 50 50)`);
  minute.setAttribute("transform",`rotate(${m*6} 50 50)`);
  second.setAttribute("transform",`rotate(${s*6} 50 50)`);

  date.innerText = now.toLocaleDateString("de-DE",{weekday:"long",day:"numeric",month:"long",year:"numeric"});

  updateWorld("atl-h","atl-m",-6);
  updateWorld("tok-h","tok-m",8);
}

function updateWorld(hId,mId,off){
  const d=new Date();
  d.setHours(d.getHours()+off);
  const h=d.getHours()%12,m=d.getMinutes();
  document.getElementById(hId).setAttribute("transform",`rotate(${h*30+m/2} 50 50)`);
  document.getElementById(mId).setAttribute("transform",`rotate(${m*6} 50 50)`);
}

setInterval(updateClock,1000);
updateClock();

async function loadWeather(id,lat,lon,city){
  try{
    const r=await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true`);
    const d=await r.json();
    const w=d.current_weather;
    document.getElementById(id).innerHTML=
      `<div class="weather-city">${city}</div>
       <div class="weather-temp">${Math.round(w.temperature)}°</div>
       <div class="weather-icon">${w.weathercode<3?"☀️":"☁️"}</div>`;
  }catch{
    document.getElementById(id).innerText="Wetter nicht verfügbar";
  }
}
loadWeather("weather-albstadt",48.21,9.03,"Albstadt");
loadWeather("weather-boeblingen",48.68,9.01,"Böblingen");

async function loadMarkets(){
  try{
    const r=await fetch("https://api.coingecko.com/api/v3/simple/price?ids=bitcoin,spy,urth&vs_currencies=eur&include_24hr_change=true");
    const d=await r.json();
    markets-list.innerHTML=
      [["Bitcoin",d.bitcoin],["SP500",d.spy],["MSCI World",d.urth]]
      .map(m=>`<div class="market-item-horizontal ${m[1].eur_24h_change>=0?"market-up":"market-down"}">
        ${m[0]}<br>€${m[1].eur.toFixed(2)}<br>${m[1].eur_24h_change.toFixed(2)}%
      </div>`).join("");
  }catch{
    markets-list.innerText="Marktdaten nicht verfügbar";
  }
}
loadMarkets();

async function loadNews(){
  try{
    const r=await fetch("https://api.allorigins.win/raw?url=https://www.tagesschau.de/rss2.xml");
    const t=await r.text();
    const x=new DOMParser().parseFromString(t,"text/xml");
    const items=[...x.querySelectorAll("item")].slice(0,4);
    news-list.innerHTML="";
    items.forEach((i,n)=>{
      const d=document.createElement("div");
      d.className="news-item";
      d.innerText=i.querySelector("title").textContent;
      news-list.appendChild(d);
      setTimeout(()=>d.classList.add("visible"),n*150);
    });
  }catch{
    news-list.innerText="Nachrichten nicht verfügbar";
  }
}
loadNews();
</script>

</body>
</html>