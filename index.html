<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dashboard</title>

<style>
body{
  margin:0;
  background:#000;
  color:#fff;
  font-family:Palatino, serif;
  display:flex;
  flex-direction:column;
  align-items:center;
}

h1{
  font-size:22px;
  margin:14px 0 6px;
}

.separator{
  width:100%;
  height:1px;
  margin:6px 0;
  background:linear-gradient(to right,transparent,rgba(255,255,255,.25),transparent);
}

/* ===== Hauptuhr ===== */
.clock{
  width:120px;
  height:120px;
  border:2px solid #fff;
  border-radius:50%;
  position:relative;
  margin:6px 0;
}

.hand{
  position:absolute;
  width:50%;
  height:2px;
  background:#fff;
  top:50%;
  left:50%;
  transform-origin:left center;
}

.hour{height:3px}

#date{
  font-size:14px;
  margin-bottom:6px;
}

/* ===== Märkte ===== */
.markets{
  display:flex;
  gap:28px;
  font-size:13px;
  margin:6px 0;
}

.market{
  padding-left:12px;
  border-left:1px solid rgba(255,255,255,.3);
}

/* ===== News ===== */
#news{
  width:90%;
  font-size:13px;
  text-align:center;
}
#news div{margin:4px 0}

/* ===== Weltuhren ===== */
.world{
  display:flex;
  gap:16px;
  margin-top:10px;
}

.small{
  width:42px;
  height:42px;
  border:1px solid #fff;
  border-radius:50%;
  position:relative;
}

/* ===== Logo ===== */
#logo{
  margin-top:6px;
  width:28px;
  height:28px;
  border:1px solid rgba(255,255,255,.4);
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:14px;
  font-weight:600;
}
</style>
</head>

<body>

<h1>Hallo Noel!</h1>
<div class="separator"></div>

<div class="clock">
  <div class="hand hour" id="h"></div>
  <div class="hand minute" id="m"></div>
</div>
<div id="date"></div>

<div class="separator"></div>

<div class="markets">
  <div class="market" id="btc">Bitcoin lädt…</div>
  <div class="market" id="eth">Ethereum lädt…</div>
  <div class="market" id="sol">Solana lädt…</div>
</div>

<div class="separator"></div>

<div id="news">Nachrichten werden geladen…</div>

<div class="separator"></div>

<div class="world">
  <div class="small" id="atl"><div class="hand hour"></div><div class="hand minute"></div></div>
  <div class="small" id="seo"><div class="hand hour"></div><div class="hand minute"></div></div>
  <div class="small" id="bei"><div class="hand hour"></div><div class="hand minute"></div></div>
  <div class="small" id="tok"><div class="hand hour"></div><div class="hand minute"></div></div>
</div>

<div id="logo">NG</div>

<script>
/* ===== Hauptuhr (FIX: echte Referenzen) ===== */
const hEl=document.getElementById("h");
const mEl=document.getElementById("m");
const dateEl=document.getElementById("date");

function updateClock(){
  const d=new Date();
  const h=d.getHours()%12;
  const m=d.getMinutes();

  hEl.style.transform=`rotate(${h*30+m*.5}deg)`;
  mEl.style.transform=`rotate(${m*6}deg)`;

  dateEl.textContent=d.toLocaleDateString("de-DE",
    {weekday:"long",day:"numeric",month:"long",year:"numeric"});
}
setInterval(updateClock,1000);
updateClock();

/* ===== Weltuhren ===== */
function smallClock(id,offset){
  const el=document.getElementById(id);
  const d=new Date();
  d.setHours(d.getHours()+offset);
  const h=d.getHours()%12;
  const m=d.getMinutes();
  el.children[0].style.transform=`rotate(${h*30+m*.5}deg)`;
  el.children[1].style.transform=`rotate(${m*6}deg)`;
}
setInterval(()=>{
  smallClock("atl",-6);
  smallClock("seo",8);
  smallClock("bei",7);
  smallClock("tok",8);
},1000);

/* ===== Märkte (wie funktionierende Version) ===== */
async function markets(){
  try{
    const r=await fetch(
      "https://api.coingecko.com/api/v3/simple/price?ids=bitcoin,ethereum,solana&vs_currencies=eur&include_24hr_change=true"
    );
    const d=await r.json();
    btc.textContent=`Bitcoin €${Math.round(d.bitcoin.eur)} (${d.bitcoin.eur_24h_change.toFixed(1)}%)`;
    eth.textContent=`Ethereum €${Math.round(d.ethereum.eur)} (${d.ethereum.eur_24h_change.toFixed(1)}%)`;
    sol.textContent=`Solana €${Math.round(d.solana.eur)} (${d.solana.eur_24h_change.toFixed(1)}%)`;
  }catch{
    btc.textContent="Marktdaten nicht verfügbar";
  }
}
markets(); setInterval(markets,120000);

/* ===== News (ROBUST wie vorhin) ===== */
async function newsLoad(){
  try{
    const r=await fetch("https://www.tagesschau.de/api2/news");
    const d=await r.json();
    if(!d.news||!d.news.length) throw "leer";
    news.innerHTML=d.news.slice(0,5).map(n=>`<div>${n.title}</div>`).join("");
  }catch{
    news.textContent="Nachrichten derzeit nicht verfügbar";
  }
}
newsLoad(); setInterval(newsLoad,300000);
</script>

</body>
</html>